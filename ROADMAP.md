# OpenTypeless 开发规划

> 开源的 AI 驱动 macOS 语音输入助手，灵感来自 [Typeless](https://www.typeless.com/)

---

## 进度总览

| 阶段 | 状态 | 完成度 |
|------|------|--------|
| 阶段 1：基础架构 | ✅ 已完成 | 100% |
| 阶段 2：语音转文字 | ✅ 已完成 | 100% |
| 阶段 3：AI 智能处理 | 🔨 进行中 | 60% |
| 阶段 4：高级功能 | 🔨 进行中 | 40% |

状态图例：🔲 待开始 | 🔨 进行中 | ✅ 已完成

---

## 阶段 1：基础架构

| 任务 | 状态 | 备注 |
|------|------|------|
| 创建 Xcode 项目 | ✅ | Swift + SwiftUI, XcodeGen |
| 菜单栏应用 | ✅ | NSStatusItem + 自定义窗口 |
| 全局快捷键监听 | ✅ | HotkeyManager，支持自定义按键组合 |
| 设置界面 | ✅ | 语音/AI/通用/快捷键/关于 五个 Tab |
| 历史记录界面 | ✅ | 列表展示 + 搜索 + 录音回放 |
| 浮动面板 | ✅ | NSPanel，录音/处理/完成三种状态 |
| 文件日志系统 | ✅ | Info/Debug 两级，按天滚动，内置日志查看器 |

---

## 阶段 2：语音转文字

| 任务 | 状态 | 备注 |
|------|------|------|
| 麦克风权限请求 | ✅ | Info.plist 配置 |
| SpeechRecognitionProvider 协议 | ✅ | 服务抽象层 |
| Apple Speech 实现 | ✅ | 实时识别，支持离线 |
| Azure Speech Service 实现 | ✅ | CocoaPods SDK，连续识别 |
| Azure OpenAI Whisper 实现 | ✅ | 录音后整段转写 |
| GPT-4o Transcribe 实现 | ✅ | 高精度转写，支持 logprobs 和提示词 |
| 文字插入功能 | ✅ | 剪贴板 + Cmd+V 模拟 |
| 实时转录浮动窗口 | ✅ | FloatingPanelController |
| 多语言支持 | ✅ | 10 种语言（中/英/日/韩/法/德/西/葡） |

---

## 阶段 3：AI 智能处理

| 任务 | 状态 | 备注 |
|------|------|------|
| AIProvider 协议 | ✅ | 服务抽象层 |
| Azure OpenAI 实现 | ✅ | Chat Completions + Responses API |
| 智能格式化 | ✅ | 修正错别字、标点、分条列点、去重 |
| 可自定义 System Prompt | ✅ | 设置界面中可编辑，支持恢复默认 |
| OpenAI Provider | 🔲 | 设置 UI 已就绪 |
| Claude Provider | 🔲 | 设置 UI 已就绪 |
| Ollama Provider | 🔲 | 设置 UI 已就绪 |
| 获取选中文本 | 🔲 | Accessibility API |
| 文本重写功能 | 🔲 | 选中 + 语音指令 |
| 翻译功能 | 🔲 | 弹窗显示结果 |

---

## 阶段 4：高级功能

| 任务 | 状态 | 备注 |
|------|------|------|
| 历史记录存储 | ✅ | SQLite (C API) |
| 历史记录搜索 | ✅ | 全文搜索 |
| 录音保存与回放 | ✅ | WAV 文件持久化 + AVAudioPlayer |
| 原文/润色对照 | ✅ | 历史记录中可展开查看 |
| 历史记录导出 | 🔲 | |
| 个人词典 | 🔲 | 自动学习 + 手动添加 |
| 多语言自动检测 | 🔲 | |
| 登录时自动启动 | 🔲 | 设置 UI 已就绪，逻辑待实现 |
| 代码签名与公证 | 🔲 | 正式分发需要 |

---

## 核心功能对照

| Typeless 功能 | OpenTypeless | 状态 |
|---------------|-------------|------|
| 语音转文字 | ✅ 4 个引擎 | ✅ |
| 智能格式化 | ✅ AI 润色 | ✅ |
| 文本重写 | 计划实现 | 🔲 |
| 翻译功能 | 计划实现 | 🔲 |
| 多应用适配 | ✅ 剪贴板模拟 | ✅ |
| 历史记录 | ✅ SQLite + 搜索 + 回放 | ✅ |
| 个人词典 | 计划实现 | 🔲 |
| 多语言支持 | ✅ 10 种语言 | ✅ |

---

## 下一步

- [ ] 实现 OpenAI / Claude / Ollama AI Provider
- [ ] 获取选中文本 (Accessibility API)
- [ ] 文本重写功能（选中 + 语音指令）
- [ ] 翻译功能
- [ ] 代码签名与公证，正式发布
